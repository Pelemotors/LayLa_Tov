# רשימת משימות מפורטת - תיקונים לפי בקשות הלקוחה

## סיכום הבקשות

הלקוחה ביקשה לבצע מספר תיקונים באתר **lior-sleep.co.il** לאחר ניתוח העיצוב, המבנה והטקסטים. להלן רשימת המשימות המפורטת לכל בקשה.

---

## 1. תיקון טווח הגילאים בקטע "נעים להכיר"

### בעיה
בטקסט כתוב שליאור מלווה תינוקות ופעוטות מגיל 5 חודשים עד גיל **5 שנים**, אבל צריך להיות עד **3.5 שנים**.

### מיקום בקוד
- **קובץ**: `app/about/page.tsx`
- **שורה**: 53

### טקסט נוכחי
```
אני מלווה הורים ותינוקות מגיל 5 חודשים ועד 5 שנים, בתהליכי שינה...
```

### טקסט חדש
```
אני מלווה הורים ותינוקות מגיל 5 חודשים ועד 3.5 שנים, בתהליכי שינה...
```

### משימות
- [ ] עדכון הטקסט ב-`app/about/page.tsx` שורה 53
- [ ] חיפוש אזכורים נוספים באתר של "5 שנים" או "עד 5 שנים"
- [ ] עדכון כל האזכורים הנמצאים
- [ ] בדיקה שהתיקון נכון בעמוד "אודות"
- [ ] בדיקה שהתיקון נכון גם בעמודים אחרים (אם יש)

---

## 2. תיקון חזרה מיותרת בעמוד "אודות"

### בעיה
הלקוחה מעירה שהמבוא בעמוד האודות מתחיל פעמיים:
- פעם אחת עם "אני..."
- פעם שנייה עם "היי..."

זה יוצר תחושה של חזרה מיותרת.

### מיקום בקוד
- **קובץ**: `app/about/page.tsx`
- **שורות**: 46-81

### טקסט נוכחי
קטע "נעים להכיר" (שורות 46-63):
```
אני ליאור נשואה לדודי ואמא לעומר הקטן...
```

קטע "איך הכל התחיל" (שורות 65-81):
```
היי, אני בת 37 – אמא, רעיה ובעיקר אחת שאוהבת ילדים ואנשים.
```

### משימות
- [ ] קריאת הטקסט המלא וזיהוי החזרה המדויקת
- [ ] בחירת פתיח אחד (או מיזוג שניהם)
- [ ] איחוד הטקסט כך שיהיה פתיח אחד בלבד
- [ ] וידוא שהטקסט זורם ללא חזרתיות
- [ ] בדיקת קריאות וזרימה
- [ ] עדכון הקובץ

---

## 3. תיקון מספר ההמלצות + החלפת MOCK DATA בנתונים מה-DB

### בעיה
- בדף הבית מוצגות **3 המלצות** (MOCK DATA)
- בעמוד ההמלצות מופיעות רק **2 המלצות** (MOCK DATA)
- **האתר משתמש ב-MOCK DATA במקום להציג את ההמלצות מה-DB**
- בדשבורד הניהול יש 4 המלצות אמיתיות מה-DB
- האתר אמור לשקף את מה שרואים בפאנל הניהול

### מיקום בקוד
- **דף הבית**: `app/page.tsx` - שורות 179-212 (MOCK DATA)
- **עמוד המלצות**: `app/testimonials/page.tsx` - שורות 9-24 (MOCK DATA)
- **דשבורד ניהול**: `app/admin/testimonials/page.tsx` - משתמש ב-DB (שורות 12-24)
- **Database**: `supabase/schema.sql` - טבלת `testimonials` (שורות 309-321)

### מבנה טבלת testimonials ב-DB
```sql
- id (UUID)
- name (VARCHAR)
- child_age (VARCHAR)
- testimonial_text (TEXT)
- rating (INTEGER, 1-5)
- featured (BOOLEAN)
- display_order (INTEGER)
- published (BOOLEAN)
- created_at (TIMESTAMP)
```

### משימות

#### 3.1 החלפת MOCK DATA בעמוד המלצות הציבורי
- [ ] פתיחת `app/testimonials/page.tsx`
- [ ] יצירת פונקציה `getTestimonials()` לקבלת המלצות מה-DB:
  - [ ] קריאה מ-Supabase מטבלת `testimonials`
  - [ ] סינון רק `published = true`
  - [ ] מיון לפי `display_order` ואז `created_at DESC`
- [ ] החלפת המזוון `testimonials` מה-MOCK DATA לנתונים מה-DB
- [ ] עדכון המבנה כך שיתאים לשדות מה-DB:
  - `name` → `testimonial.name`
  - `childAge` → `testimonial.child_age`
  - `text` → `testimonial.testimonial_text`
  - `rating` → `testimonial.rating`
- [ ] עדכון ה-render כך שיטפל במקרה של 0 המלצות
- [ ] הסרת ה-TODO comment (שורה 10)

#### 3.2 החלפת MOCK DATA בדף הבית
- [ ] פתיחת `app/page.tsx`
- [ ] יצירת פונקציה `getFeaturedTestimonials()` לקבלת המלצות מומלצות:
  - [ ] קריאה מ-Supabase מטבלת `testimonials`
  - [ ] סינון `published = true`
  - [ ] אפשרות: סינון `featured = true` או פשוט 3 הראשונות לפי `display_order`
  - [ ] הגבלה ל-3 המלצות (`.limit(3)`)
  - [ ] מיון לפי `display_order` ואז `created_at DESC`
- [ ] החלפת ה-MOCK DATA בנתונים מה-DB (שורות 185-205)
- [ ] עדכון המבנה כך שיתאים לשדות מה-DB
- [ ] עדכון ה-render כך שיטפל במקרה של 0 המלצות (או להציג הודעה)
- [ ] וידוא שההמלצות מוצגות נכון עם כל הפרטים

#### 3.3 בדיקות ואבטחה
- [ ] בדיקה ששניהם משתמשים ב-`supabaseServer` (server component)
- [ ] בדיקה שה-RLS policies מאפשרות קריאה ציבורית (`published = true`)
- [ ] בדיקה שההמלצות מהדשבורד מופיעות נכון בשני המקומות
- [ ] בדיקה שכאשר יש יותר מ-3 המלצות בדף הבית, מוצגות רק 3
- [ ] בדיקה שכאשר יש פחות מ-3, הדף לא נשבר
- [ ] בדיקה שהכפתור "קראי עוד המלצות" עובד
- [ ] בדיקה בעמוד המלצות שכל ההמלצות מופיעות

#### 3.4 עקביות
- [ ] וידוא ששני העמודים מציגים נתונים זהים מה-DB
- [ ] בדיקה שכאשר מוסיפים המלצה חדשה בדשבורד, היא מופיעה באתר
- [ ] בדיקה שכאשר מסירים המלצה בדשבורד, היא נעלמת מהאתר
- [ ] בדיקה שסדר התצוגה (`display_order`) עובד נכון

---

## 4. שינוי ניסוח בסעיף הסבסוד - מגוף שלישי לראשון

### בעיה
במקום לכתוב בגוף שלישי "יועצת השינה ליאור מאמינה ש...", הלקוחה מציעה להשתמש בניסוח בגוף ראשון ("אני מאמינה ש..." או "אצלנו מאמינים ש...") כדי לשמור על טון אישי ותואם לשאר האתר.

### מיקום בקוד
- **קובץ**: `app/method/page.tsx`
- **שורה**: 212

### טקסט נוכחי
```
יועצת השינה ליאור מאמינה שכל משפחה זכאית לשקט, למנוחה ולשינה טובה – גם בלי להכביד כלכלית.
```

### טקסט חדש (אופציה א)
```
אני מאמינה שכל משפחה זכאית לשקט, למנוחה ולשינה טובה – גם בלי להכביד כלכלית.
```

### טקסט חדש (אופציה ב)
```
אצלנו מאמינים שכל משפחה זכאית לשקט, למנוחה ולשינה טובה – גם בלי להכביד כלכלית.
```

### משימות
- [ ] חיפוש כל האזכורים בגוף שלישי בקטע הסבסוד
- [ ] בחירת הניסוח המתאים (אופציה א או ב)
- [ ] עדכון הטקסט ב-`app/method/page.tsx`
- [ ] בדיקה שהטון תואם לשאר האתר
- [ ] קריאה מחדש של הקטע המלא לוידוא זרימה

---

## 5. הרחבת הסברים בקטעי הניקוד + הוספת שלב מילוי פרטים

### בעיה א': הרחבת הסברים על רמות הניקוד
בדף שבו מוצגות תוצאות שאלון השינה מופיעות "רמות מצב" שונות. הלקוחה מבקשת להרחיב את ההסבר לכל רמה (להבהיר מה המשמעות של רמה 1, 2, 3) כדי שהמשתמש יבין טוב יותר מה מקבל ומה השלב הבא.

### בעיה ב': הוספת שלב מילוי פרטים
הלקוחה רוצה שהמשתמש יתחיל ממילוי פרטים (שם, נייד) לפני השאלון, ושכל לקוח שימלא את השאלון או חלק ממנו יגיע כליד. חשוב שהליד יישמר מיד לאחר הכנסת הפרטים, לא רק אם סיים את כל השאלון. בנוסף, צריך מנגנון לראות באיזה שלב בשאלון המשתמש נעצר.

### מיקום בקוד
- **קומפוננטת השאלון**: `components/quiz/SleepAssessmentQuiz.tsx`
- **קומפוננטת תוצאות**: `components/quiz/QuizResult.tsx`
- **נתוני השאלון**: `lib/quizData.ts`
- **API שמירת לידים**: `app/api/leads/route.ts`
- **Schema DB**: `supabase/schema.sql`

### משימות - הרחבת הסברים על רמות הניקוד

#### 5.1 עדכון מבנה הנתונים
- [ ] פתיחת `lib/quizData.ts`
- [ ] הוספת שדה `detailedExplanation` לכל tier ב-`quizResults`
- [ ] כתיבת הסבר מפורט לכל רמה:
  - **Tier 1**: מה המשמעות, מה אפשר לצפות, מה השלב הבא
  - **Tier 2**: מה המשמעות, מה אפשר לצפות, מה השלב הבא
  - **Tier 3**: מה המשמעות, מה אפשר לצפות, מה השלב הבא

#### 5.2 עדכון קומפוננטת התוצאות
- [ ] פתיחת `components/quiz/QuizResult.tsx`
- [ ] הוספת סקשן להצגת ההסבר המפורט
- [ ] עיצוב הסקשן כך שיהיה ברור וקריא
- [ ] הוספת הסבר על המשמעות של כל רמה
- [ ] הוספת הסבר על מה המשתמש יכול לצפות לקבל
- [ ] הוספת הסבר על מה השלב הבא המומלץ

#### 5.3 בדיקות
- [ ] בדיקה שההסברים מוצגים נכון לכל רמה
- [ ] בדיקת קריאות וזרימה
- [ ] בדיקה במובייל ובדסקטופ

### משימות - הוספת שלב מילוי פרטים ושמירת לידים

#### 5.4 עדכון Database Schema
- [ ] פתיחת `supabase/schema.sql` (או יצירת migration חדש)
- [ ] הוספת שדות חדשים לטבלת `leads`:
  - `current_question_index` (integer, nullable) - איזה שאלה הייתה האחרונה שהמשתמש ענה עליה
  - `quiz_completed` (boolean, default false) - האם סיים את השאלון
  - `quiz_started_at` (timestamp, nullable) - מתי התחיל את השאלון
- [ ] הרצת ה-migration

#### 5.5 עדכון API Routes
- [ ] פתיחת `app/api/leads/route.ts`
- [ ] הוספת תמיכה ביצירת ליד עם פרטים בסיסיים בלבד (שם וטלפון)
- [ ] הוספת endpoint חדש או עדכון הקיים לתמיכה ב:
  - יצירת ליד חדש עם פרטים בסיסיים
  - עדכון ליד קיים עם התקדמות השאלון
  - עדכון ליד בעת סיום השאלון
- [ ] הוספת ולידציה לפרטים
- [ ] שמירת `quiz_started_at` בעת יצירת הליד
- [ ] שמירת `current_question_index` בכל עדכון

#### 5.6 עדכון קומפוננטת השאלון
- [ ] פתיחת `components/quiz/SleepAssessmentQuiz.tsx`
- [ ] הוספת state חדש לשלב מילוי פרטים:
  - `showContactForm` (boolean) - האם להציג את הטופס
  - `leadId` (string | null) - ID של הליד שנוצר
  - `userContactInfo` (object) - שם וטלפון
- [ ] יצירת מסך ראשוני עם טופס שם וטלפון
- [ ] הוספת ולידציה לטלפון ישראלי
- [ ] שליחה ל-API ליצירת ליד מיד לאחר מילוי הפרטים
- [ ] שמירת `leadId` ב-state
- [ ] עדכון הלוגיקה כך שבכל שלב השאלון ישלח עדכון ל-API
- [ ] עדכון `current_question_index` בכל תשובה
- [ ] סימון `quiz_completed = true` בעת סיום השאלון

#### 5.7 עדכון קומפוננטת התוצאות
- [ ] פתיחת `components/quiz/QuizResult.tsx`
- [ ] הסרת הטופס שם וטלפון (כי כבר ממלא בהתחלה)
- [ ] או שמירה על הטופס אם הליד לא נוצר בהתחלה (fallback)

#### 5.8 בדיקות
- [ ] בדיקה שיצירת ליד עובדת עם פרטים בסיסיים
- [ ] בדיקה שהליד מתעדכן בכל שלב של השאלון
- [ ] בדיקה שהליד מסומן כ-completed בעת סיום
- [ ] בדיקה ש`current_question_index` נשמר נכון
- [ ] בדיקה שצפייה בליד בדשבורד מציגה את השלב שבו המשתמש נעצר
- [ ] בדיקה במובייל ובדסקטופ

---

## 6. שיפור שם ליאור במובייל

### בעיה
הלקוחה ציינה שבעת צפייה בטלפון השם "ליאור" לא ברור מספיק. ייתכן שבגרסת המובייל הטקסט או הלוגו קטן מדי או נבלע בתמונה.

### מיקום בקוד
- **קובץ**: `components/layout/Header.tsx`
- **שורות**: 25-31

### טקסט נוכחי
```tsx
<span className="text-2xl font-heading font-bold text-text-dark bg-gradient-to-r from-accent-sky to-accent-lavender bg-clip-text text-transparent">
  ליאור
</span>
```

### משימות
- [ ] בדיקת התצוגה במובייל (iPhone, Android)
- [ ] זיהוי הבעיה המדויקת:
  - [ ] הטקסט קטן מדי?
  - [ ] הטקסט נבלע ברקע?
  - [ ] חסר קונטרסט?
- [ ] בחירת פתרון:
  - [ ] **אופציה א**: הגדלת גודל הטקסט במובייל (מ-`text-2xl` ל-`text-3xl` או יותר)
  - [ ] **אופציה ב**: הוספת רקע לבן/צבעוני לשם
  - [ ] **אופציה ג**: הוספת צל או תחום ברור לשם
  - [ ] **אופציה ד**: שינוי מיקום כך שהשם יהיה על רקע בטוח (לא על תמונה)
- [ ] יישום הפתרון
- [ ] בדיקה בכמה מכשירים שונים
- [ ] וידוא שהשם ברור וקריא

---

## 7. עדכון טקסטים לפי הגוגל דוקס

### בעיה
הקובץ שהלקוחה שלחה מכיל את הטקסטים של האתר עם הערות בצבע (ירוק/אדום). חלק מהשינויים הם:
- מחיקות של שורות כפולות
- ניסוחים מחדש
- הוספת הבהרות

### קישור למסמך
https://docs.google.com/document/d/1ydeSxU0GrK_AgVUotW00BMdrvHlOI8pL/edit?usp=sharing&ouid=107796193065793118742&rtpof=true&sd=true

### משימות
- [ ] קבלת גישה לקובץ הגוגל דוקס
- [ ] קריאת המסמך המלא
- [ ] זיהוי כל השינויים המסומנים:
  - [ ] טקסטים ירוקים (להוסיף/לשנות)
  - [ ] טקסטים אדומים (למחוק/לשנות)
  - [ ] הערות והבהרות
- [ ] יצירת רשימה מפורטת של כל השינויים לפי עמוד:
  - [ ] עמוד הבית
  - [ ] עמוד אודות
  - [ ] עמוד השיטה
  - [ ] עמוד מסלולים
  - [ ] עמוד המלצות
  - [ ] עמוד מאמרים
  - [ ] עמוד צור קשר
  - [ ] עמוד בדיקת מצב שינה
- [ ] יישום כל השינויים בקבצים המתאימים
- [ ] בדיקת עקביות
- [ ] קריאה מחדש של כל העמודים לוידוא שהכל נכון

---

## 8. השלמת תוכן בעמוד מסלולים + וידוא דשבורד ניהול

### בעיה
עמוד המסלולים מציין שהמסלולים יופיעו בהמשך. הלקוחה לא סיפקה תוכן עדיין, אבל חשוב לוודא שדשבורד הניהול של הלקוחה יאפשר לה בקלות לטעון ולהעלות מסלולים שישתקפו באתר.

### מיקום בקוד
- **עמוד מסלולים ציבורי**: `app/programs/page.tsx`
- **דשבורד ניהול**: `app/admin/programs/`
  - `page.tsx` - רשימת מסלולים
  - `new/page.tsx` - יצירת מסלול חדש
  - `[id]/edit/page.tsx` - עריכת מסלול
- **API Routes**: `app/api/admin/programs/`

### משימות - וידוא דשבורד הניהול

#### 8.1 בדיקת פונקציונליות קיימת
- [ ] פתיחת `app/admin/programs/page.tsx`
- [ ] בדיקה שהדשבורד מאפשר:
  - [ ] יצירת מסלול חדש (כפתור "מסלול חדש")
  - [ ] רשימת מסלולים קיימים
  - [ ] עריכת מסלול קיים
  - [ ] מחיקת מסלול
- [ ] פתיחת `app/admin/programs/new/page.tsx`
- [ ] בדיקה שהטופס כולל את כל השדות הנדרשים:
  - [ ] שם (עברית)
  - [ ] תיאור
  - [ ] תכונות (features list)
  - [ ] מחיר (אופציונלי)
  - [ ] סטטוס פעיל/לא פעיל
  - [ ] סדר תצוגה (display_order)
  - [ ] תמונה/אייקון (אופציונלי)
- [ ] בדיקת `app/api/admin/programs/route.ts`:
  - [ ] POST - יצירת מסלול חדש
  - [ ] GET - קבלת רשימת מסלולים
- [ ] בדיקת `app/api/admin/programs/[id]/route.ts`:
  - [ ] PUT/PATCH - עדכון מסלול
  - [ ] DELETE - מחיקת מסלול
- [ ] בדיקת שמירה ב-Database

#### 8.2 תיקונים ושיפורים נדרשים
- [ ] אם חסרים שדות בטופס - הוספתם
- [ ] אם חסרים endpoints - יצירתם
- [ ] וידוא שכל הפעולות עובדות
- [ ] בדיקת ולידציה
- [ ] בדיקת שגיאות

#### 8.3 בדיקות
- [ ] בדיקה שיצירת מסלול חדש עובדת
- [ ] בדיקה שעריכת מסלול עובדת
- [ ] בדיקה שמחיקת מסלול עובדת
- [ ] בדיקה שהמסלולים מופיעים בעמוד הציבורי (`app/programs/page.tsx`)
- [ ] בדיקה שסידור התצוגה עובד (display_order)
- [ ] בדיקה שסטטוס פעיל/לא פעיל עובד

---

## 9. בדיקת עקביות בתוכן

### בעיה
צריך לוודא שאין חזרתיות מיותרת בניסוח ושכל כפתורי "עוד" מובילים לתוכן אמיתי.

### משימות
- [ ] סריקת כל קבצי התוכן:
  - [ ] `app/page.tsx`
  - [ ] `app/about/page.tsx`
  - [ ] `app/method/page.tsx`
  - [ ] `app/programs/page.tsx`
  - [ ] `app/testimonials/page.tsx`
  - [ ] `app/blog/page.tsx`
  - [ ] `app/contact/page.tsx`
- [ ] חיפוש חזרתיות בניסוח:
  - [ ] שורות כפולות
  - [ ] ניסוחים חוזרים
- [ ] איחוד לניסוח אחד עקבי
- [ ] בדיקת כל כפתורי "עוד" או "קראי עוד":
  - [ ] וידוא שהם מובילים לתוכן אמיתי
  - [ ] הסרת כפתורים אם אין תוכן מתאים
- [ ] בדיקת עקביות בסגנון כתיבה

---

## סדר עדיפויות מוצע

1. **גבוה**:
   - תיקון טווח הגילאים (#1)
   - הרחבת הסברים על רמות הניקוד (#5.1-5.3)

2. **בינוני-גבוה**:
   - הוספת שלב מילוי פרטים ושמירת לידים (#5.4-5.8)
   - תיקון חזרה מיותרת (#2)

3. **בינוני**:
   - החלפת MOCK DATA בהמלצות (#3)
   - תיקון חזרה מיותרת (#2)
   - שינוי ניסוח סבסוד (#4)

4. **בינוני-נמוך**:
   - שיפור שם במובייל (#6)
   - וידוא דשבורד מסלולים (#8)

5. **תלוי בגישה**:
   - עדכון לפי הדוקס (#7)

6. **כללי**:
   - בדיקת עקביות (#9)

---

## הערות טכניות

- כל השינויים ייעשו בעברית (RTL)
- יש לבדוק את כל העמודים במובייל לאחר השינויים
- יש לבצע בדיקות QA לפני מסירה
- חשוב לשמור גיבוי של הקבצים לפני השינויים
- מומלץ לבצע commit אחרי כל תיקון משמעותי

---

**תאריך יצירה**: 2024  
**סטטוס**: מוכן לביצוע

